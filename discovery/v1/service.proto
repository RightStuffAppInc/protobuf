syntax = "proto3";

package discovery;


service Discovery {
    rpc UpdateUser(UpdateUserRequest) returns (UserReply) {}

    rpc GetUsers(GetUsersRequest) returns (UsersReply) {}
    rpc GetEvents(GetEventsRequest) returns (EventsReply) {}

    rpc SetSeen(SetSeenRequest) returns (SeenReply) {}
    rpc ResetSeen(ResetSeenRequest) returns (SeenReply) {}
}

message UpdateUserRequest {
    string user_id = 1;
    optional int32 max_age = 2;
    optional int32 min_age = 3;
    optional int32 max_distance = 4;
    optional int32 min_distance = 5;
    optional float longitude = 6;
    optional float latitude = 7;
}

message UserReply {
    string user_id = 1;
    int32 max_age = 2;
    int32 min_age = 3;
    int32 max_distance = 4;
    int32 min_distance = 5;
    float longitude = 6;
    float latitude = 7;
}

message GetUsersRequest {
    string user_id = 1;
    string cursor = 2;
    int32 limit = 3;
}

message UsersReply {
    repeated string user_ids = 1;
    string next = 2;
}

message GetEventsRequest {
    string user_id = 1;
}

message EventsReply {
    repeated string event_ids = 1;
    string next = 2;
}

message SeenReply {}

message SetSeenRequest {
    string user_id = 1;
    string other_id = 2;
}

message ResetSeenRequest {
    string user_id = 1;
}